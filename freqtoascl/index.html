<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Freq To ASCL Generator</title>
</head>
<body>
  <section>
    <h1>freqToAscl</h1>
    <details>
      <summary>
        About
      </summary>
      <p class="info">
        Introduced in Ableton Live 12 is a tuning system enabling users to apply custom tunings with
        the .ascl file format, a backward compatible extension of the Scala .scl format.
        freqToAscl aids users who want to use absolute note frequencies in their projects or use
        a selection of frequencies that do not scale or have repeating octaves.
        It generates an .ascl file from a list of hz values, tuning the entire note range and assign
        corresponding values to note names that appear in the piano roll. A zero appears after the name
        to label the octave, there's no known way to avoid this currently.
      </p>
    </details>
    <details>
      <summary>
        Help
      </summary>
      <p class="info">
        Enter frequencies as a list separated by space or comma. By default a note sequence containing less than 128
        values will be wrapped so it repeats to fill the max note range of 128, unselecting "Wrap note sequence"
        will clamp the range to the initial sequence leaving the remaining notes unplayable.
        You can choose to map values to white keys only, this can make it nicer to play a custom sequence
        of notes on a traditional keyboard where less than 128 notes are required or any scale that doesn't use the
        normal white / black sequence. When using this option black keys are assigned a duplicate value of the previous 
        white note and as the number of white keys is 92, lists are limited to that many values and any above will be omitted.
      </p>
    </details>

    <form id="asclForm">
      <div class="inputs">
        <label for="name">Name</label>
        <textarea id="name" rows="1" placeholder="Tuning name." aria-describedby="nameHelp"></textarea>
        <span id="nameHelp" class="visually-hidden">Enter the name for your scale. This name will be used in the .ascl file.</span>
    
        <label for="description">Description</label>
        <textarea id="description" rows="5" placeholder="Tuning description." aria-describedby="descriptionHelp"></textarea>
        <span id="descriptionHelp" class="visually-hidden">Provide a description of the scale.</span>
    
        <label for="frequencies">Frequencies</label>
        <textarea id="frequencies" rows="10" placeholder="40 80 120 160 220 320 440 480 528 620" aria-describedby="frequenciesHelp"></textarea>
        <span id="frequenciesHelp" class="visually-hidden">Enter the frequencies as a list separated by space or comma.</span>
      </div>
      
      <div class="options-container">
        <label for="wrapSequence">
          <input type="checkbox" id="wrapSequence" aria-labelledby="wrapSequenceLabel" checked>
          <span id="wrapSequenceLabel">Wrap note sequence</span>
        </label>
        <label for="whiteKeysOnly">
          <input type="checkbox" id="whiteKeysOnly" aria-labelledby="whiteKeysLabel">
          <span id="whiteKeysLabel">Map to white keys only</span>
        </label>

      </div>
      
      <button type="submit">Save File</button>  
    </form>
    
  </section>

  <script>
   const _0x4d5ef4=_0x250e;(function(_0x4b1095,_0x373e05){const _0x4eb296=_0x250e,_0x3b15dd=_0x4b1095();while(!![]){try{const _0x1f2357=parseInt(_0x4eb296(0x10d))/0x1+-parseInt(_0x4eb296(0x116))/0x2+-parseInt(_0x4eb296(0xfe))/0x3*(-parseInt(_0x4eb296(0x11d))/0x4)+-parseInt(_0x4eb296(0x110))/0x5+parseInt(_0x4eb296(0x102))/0x6+parseInt(_0x4eb296(0x10a))/0x7+-parseInt(_0x4eb296(0x120))/0x8;if(_0x1f2357===_0x373e05)break;else _0x3b15dd['push'](_0x3b15dd['shift']());}catch(_0x2258d7){_0x3b15dd['push'](_0x3b15dd['shift']());}}}(_0x26d6,0xe32b5),document[_0x4d5ef4(0x118)](_0x4d5ef4(0x123))[_0x4d5ef4(0x11f)](_0x4d5ef4(0x11b),function(_0x48f368){_0x48f368['preventDefault'](),generateASCL();}));function generateASCL(){const _0x4852e3=_0x4d5ef4,_0xcf980b=document[_0x4852e3(0x118)](_0x4852e3(0x122))[_0x4852e3(0xfa)],_0xc10c9a=_0xcf980b['split'](/[\s,]+/)[_0x4852e3(0x103)](_0x389f6f=>parseFloat(_0x389f6f[_0x4852e3(0xf7)]()))[_0x4852e3(0x105)](_0x9e22fb=>!isNaN(_0x9e22fb)),_0x9e5dc8=document[_0x4852e3(0x118)](_0x4852e3(0x100))['value'],_0x86f90c=document[_0x4852e3(0x118)](_0x4852e3(0x114))['value'],_0x477a00=document[_0x4852e3(0x118)](_0x4852e3(0x11e))[_0x4852e3(0x11a)],_0x26d502=document[_0x4852e3(0x118)](_0x4852e3(0x10b))[_0x4852e3(0x11a)];let _0x2fc507,_0x161344;_0xc10c9a[_0x4852e3(0xfb)]!==0x80&&_0x26d502?(_0x2fc507=createKeyMapping(_0xc10c9a,_0x477a00),_0x161344='0\x201\x200\x20'+_0xc10c9a[_0x4852e3(0xfb)]):(_0x2fc507=_0xc10c9a,_0x161344=_0x4852e3(0xf9));const _0xfc57ba=0x0,_0xa23651=_0xc10c9a[0x0],_0x36bd78=0x0,_0x1ca44b=0x0,_0x41c6e3=_0x2fc507[_0xfc57ba],_0x11e1e9=_0x2fc507[_0x4852e3(0x103)](_0x733909=>0x4b0*Math[_0x4852e3(0x10c)](_0x733909/_0x41c6e3));let _0x1b9712='!\x20'+_0x9e5dc8+'.ascl\x0a'+_0x86f90c+_0x4852e3(0xfc)+_0x2fc507['length']+_0x4852e3(0x109);for(let _0x1bc79a=0x0;_0x1bc79a<_0x2fc507['length'];_0x1bc79a++){const _0x9a3fef=_0x1bc79a,_0x38bbe0=midiToNoteName(_0x9a3fef);_0x1b9712+='\x20'+_0x11e1e9[_0x1bc79a]['toFixed'](0x6)+_0x4852e3(0x117)+_0x9a3fef+'\x20'+_0x38bbe0+':\x20'+_0x2fc507[_0x1bc79a]+_0x4852e3(0x119);}_0x1b9712+=_0x4852e3(0x10f)+_0x1ca44b+'\x20'+_0x36bd78+'\x20'+_0xa23651,_0x1b9712+=_0x4852e3(0x121)+_0x161344+'\x0a',_0x1b9712+=_0x4852e3(0x107)+_0x2fc507[_0x2fc507['length']-0x1]+_0x4852e3(0x11c);for(let _0xcb7250=0x0;_0xcb7250<_0x2fc507['length']-0x1;_0xcb7250++){_0x1b9712+='\x22'+_0x2fc507[_0xcb7250]+_0x4852e3(0x11c);}_0x1b9712+=_0x4852e3(0x112),_0x1b9712+=_0x4852e3(0x104),download(_0x9e5dc8+_0x4852e3(0xff),_0x1b9712);}function midiToNoteName(_0x5bdc3c){const _0x210bee=_0x4d5ef4,_0x473f61=['C','C#','D','D#','E','F','F#','G','G#','A','A#','B'],_0xaae7=Math[_0x210bee(0x111)](_0x5bdc3c/0xc)-0x2,_0x478197=_0x473f61[_0x5bdc3c%0xc];return''+_0x478197+_0xaae7;}function _0x26d6(){const _0x2b7d74=['\x20\x22\x20','1690968CeoDpj','whiteKeysOnly','addEventListener','14084576YJYVhn','\x0a!\x20@ABL\x20NOTE_RANGE_BY_INDEX\x20','frequencies','asclForm','trim','click','0\x201\x201\x200','value','length','\x0a!\x0a\x20','includes','12bbFfvE','.ascl','name','forEach','8999928RDvoYt','map','\x0a!\x20@ABL\x20LINK\x20ultradian7.github.io\x0a','filter','push','!\x20@ABL\x20NOTE_NAMES\x20\x22','download','\x0a!\x0a','7764316gcspFL','wrapSequence','log2','60464gjdPSq','href','!\x0a!\x20@ABL\x20REFERENCE_PITCH\x20','2173485QrHrMy','floor','\x0a!\x20@ABL\x20SOURCE\x20File\x20generated\x20by\x20freqToAscl.','createElement','description','text/plain','2469708fsCGLF','\x20!\x20#','getElementById','hz\x0a','checked','submit'];_0x26d6=function(){return _0x2b7d74;};return _0x26d6();}function createKeyMapping(_0x1c814d,_0x36b737){const _0x5df4d0=_0x4d5ef4;let _0x3a827d=new Array(0x80)['fill'](null);if(_0x36b737){const _0x244bde=[];for(let _0x208e6b=0x0;_0x208e6b<0x80;_0x208e6b++){[0x0,0x2,0x4,0x5,0x7,0x9,0xb][_0x5df4d0(0xfd)](_0x208e6b%0xc)&&_0x244bde[_0x5df4d0(0x106)](_0x208e6b);}_0x244bde[_0x5df4d0(0x101)]((_0x1582aa,_0x1f4411)=>{_0x3a827d[_0x1582aa]=_0x1c814d[_0x1f4411%_0x1c814d['length']];}),_0x3a827d[_0x5df4d0(0x101)]((_0x13b5be,_0x446fae,_0x1a01d0)=>{_0x13b5be===null&&(_0x1a01d0[_0x446fae]=_0x1a01d0[_0x446fae-0x1]);});}else for(let _0x411283=0x0;_0x411283<_0x3a827d['length'];_0x411283++){_0x3a827d[_0x411283]=_0x1c814d[_0x411283%_0x1c814d[_0x5df4d0(0xfb)]];}return _0x3a827d;}function _0x250e(_0x37b93e,_0x36aeea){const _0x26d645=_0x26d6();return _0x250e=function(_0x250ef2,_0x107c2d){_0x250ef2=_0x250ef2-0xf7;let _0x234aa6=_0x26d645[_0x250ef2];return _0x234aa6;},_0x250e(_0x37b93e,_0x36aeea);}function download(_0x303da6,_0xe9970e){const _0x1a342e=_0x4d5ef4,_0x29fcf9=document[_0x1a342e(0x113)]('a'),_0x32cce1=new Blob([_0xe9970e],{'type':_0x1a342e(0x115)});_0x29fcf9[_0x1a342e(0x10e)]=URL['createObjectURL'](_0x32cce1),_0x29fcf9[_0x1a342e(0x108)]=_0x303da6,_0x29fcf9[_0x1a342e(0xf8)]();}
  </script>
  
</body>
</html>
